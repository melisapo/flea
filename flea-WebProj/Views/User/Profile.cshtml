@model flea_WebProj.Models.ViewModels.Auth.UserProfileViewModel

@{
    ViewData["Title"] = Model.Name;
}

<main class="flex-1 flex flex-col items-center">
    <!-- Header Image Section -->
    <div class="w-full max-w-[1440px] px-4 sm:px-6 lg:px-8">
        <div class="header-gradient relative rounded-3xl h-[160px] sm:h-[200px] w-full">

            <div class="header-pattern absolute inset-0"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#fbfdf1]/40 to-transparent"></div>

            <!-- Avatar -->
            <div class="absolute -bottom-8 sm:-bottom-6 left-1/2 sm:left-12 transform -translate-x-1/2 sm:translate-x-0">
                <div class="w-40 h-40 rounded-full bg-white p-1.5 shadow-soft">
                    <img src="@Model.ProfilePic"
                         alt="Profile picture"
                         class="w-full h-full rounded-full object-cover border border-gray-100" />
                </div>
            </div>

        </div>
    </div>

    <!-- Content Grid -->
    <div class="w-full max-w-[1440px] px-4 sm:px-6 lg:px-8 pt-8 sm:pt-10 md:pt-14 pb-6 grid grid-cols-12 gap-4 md:gap-6">
        
        <!-- Left Column: Basic Info -->
        <div class="col-span-12 lg:col-span-3 flex flex-col gap-6">
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-touch">
                <div class="mb-2">
                    <h1 class="text-2xl font-extrabold text-[#25231e] leading-tight">@Model.Name</h1>
                    <p class="text-[#25231e]/50 font-medium">@@@Model.Username</p>
                </div>
                
                <p class="text-[#25231e]/50 text-sm leading-relaxed flex items-center gap-2">
                    <span class="material-symbols-outlined text-base">calendar_today</span>
                    Miembro desde @Model.MemberSince.ToString("MMMM yyyy")
                </p>
            </div>

            <!-- Stats Card -->
            <div class="bg-[#25231e] p-6 sm:p-8 rounded-2xl text-white shadow-touch relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <span class="material-symbols-outlined text-[80px]">auto_graph</span>
                </div>
                <h3 class="text-[#98cf54] font-bold text-md tracking-widest mb-6">Publicaciones</h3>
                <div class="flex flex-col gap-1">
                    <span class="text-6xl font-black leading-none">@Model.TotalPosts</span>
                    <span class="text-white/50 font-medium">Productos publicados</span>
                </div>
            </div>

            <!-- Location Card -->
            @if (!string.IsNullOrEmpty(Model.StateProvince))
            {
                <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-touch">
                    <h3 class="font-bold text-md tracking-widest text-foreground/60 mb-6">Ubicación</h3>
                    <div class="flex flex-col items-center text-center gap-4">
                        <div class="w-16 h-16 rounded-full bg-[#98cf54]/10 flex items-center justify-center">
                            <span class="material-symbols-outlined text-[#98cf54] text-3xl">location_on</span>
                        </div>
                        <div>
                            <p class="font-bold text-[#25231e] text-lg">@Model.City</p>
                            <p class="text-[#25231e]/60 text-sm">@Model.StateProvince, @Model.Country</p>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Center Column: Contact & Posts -->
        <div class="col-span-12 lg:col-span-9 flex flex-col gap-8">
            
            <!-- Contact Information -->
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-touch">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-[#98cf54]/20 p-3 rounded-xl">
                        <span class="material-symbols-outlined text-[#98cf54] font-bold">contact_mail</span>
                    </div>
                    <h2 class="text-xl font-bold">Información de Contacto</h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="flex flex-col gap-1">
                        <span class="text-sm font-bold tracking-widest text-[#25231e]/30">Email</span>
                        <div class="flex items-center gap-2">
                            <a href="mailto:@Model.Email" 
                               class="text-[#25231e]/80 font-semibold hover:text-[#98cf54] transition-colors">
                                @Model.Email
                            </a>
                            </div>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.PhoneNumber))
                    {
                        <div class="flex flex-col gap-1">
                            <span class="text-sm font-bold tracking-widest text-[#25231e]/30">Teléfono</span>
                            <div class="flex items-center gap-2">
                                <a href="tel:@Model.PhoneNumber" 
                                   class="text-[#25231e]/80 font-semibold hover:text-[#98cf54] transition-colors">
                                    @Model.PhoneNumber
                                </a>
                            </div>
                        </div>
                    }

                    @if (!string.IsNullOrEmpty(Model.TelegramUser))
                    {
                        <div class="flex flex-col gap-1">
                            <span class="text-sm font-bold tracking-widest text-[#25231e]/30">Telegram</span>
                            <div class="flex items-center gap-2">
                                <a  href="https://t.me/@Model.TelegramUser"
                                    class="text-[#25231e]/80 font-semibold hover:text-[#98cf54] transition-colors">
                                    @Model.TelegramUser
                                </a>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- Publications Section -->
            <div class="bg-white rounded-2xl shadow-touch overflow-hidden border-t-4 border-[#98cf54]">
                <div class="px-6 sm:px-8 py-5 border-b border-[#f0f4e4] flex items-center gap-3">
                    <h5 class="text-[#25231e] font-bold text-lg">
                        Publicaciones de @Model.Username
                    </h5>
                </div>

                <div class="p-6 sm:p-8">
                    @if (!Model.RecentPosts.Any())
                    {
                        <!-- Empty State -->
                        <div class="flex flex-col items-center text-center py-16">
                            <div class="w-20 h-20 mb-6 rounded-full bg-gray-100 flex items-center justify-center">
                                <span class="material-symbols-outlined text-gray-400 text-5xl">inventory_2</span>
                            </div>
                            <h3 class="text-xl font-bold text-[#25231e] mb-2">
                                No hay publicaciones disponibles
                            </h3>
                            <p class="text-[#25231e]/60 text-sm">
                                Este usuario no tiene publicaciones activas en este momento
                            </p>
                        </div>
                    }
                    else
                    {
                        <!-- Products Grid -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                            @foreach (var post in Model.RecentPosts)
                            {
                                <a asp-controller="Posts"
                                   asp-action="Details"
                                   asp-route-id="@post.PostId"
                                   class="group bg-white border border-[#e5e9d8] rounded-xl overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col">
                                    
                                    <!-- Image -->
                                    <div class="relative aspect-[4/3] overflow-hidden bg-gray-100">
                                        <img src="@post.MainImage"
                                             alt="@post.Title"
                                             class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                    </div>

                                    <!-- Content -->
                                    <div class="p-4 flex-1 flex flex-col">
                                        <h3 class="font-bold mb-2 line-clamp-1">
                                            @post.Title
                                        </h3>
                                        <p class="text-sm text-mutedForeground mb-4 line-clamp-2">
                                            @post.Description
                                        </p>
                                        <div class="mt-auto flex items-center justify-between pt-3 border-t border-[#f0f4e4]">
                                            <span class="font-black text-xl text-[#25231e]">
                                                $@post.Price.ToString("N2")
                                            </span>
                                            <span class="text-xs text-mutedForeground flex items-center gap-1">
                                                <span class="material-symbols-outlined text-sm">schedule</span>
                                                @post.CreatedAt.ToString("dd/MM/yyyy")
                                            </span>
                                        </div>
                                    </div>
                                </a>
                            }
                        </div>

                        @if (Model.TotalPosts > Model.RecentPosts.Count)
                        {
                            <div class="text-center mt-8 pt-6 border-t border-[#f0f4e4]">
                                <p class="text-sm text-[#25231e]/60 mb-4">
                                    Mostrando @Model.RecentPosts.Count de @Model.TotalPosts publicaciones
                                </p>
                                <button class="px-8 py-3 rounded-xl border-2 border-[#98cf54] text-[#25231e] font-bold hover:bg-[#98cf54] hover:text-white transition-all">
                                    Ver todas las publicaciones
                                </button>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</main>

<style>
    .header-gradient {
        background: linear-gradient(135deg, #eef7e2 0%, #fbfdf1 100%);
        position: relative;
    }
    
    .header-pattern {
        opacity: 0.4;
        background-image: radial-gradient(#98cf54 0.5px, transparent 0.5px);
        background-size: 24px 24px;
    }
    
    .shadow-soft {
        box-shadow: 0 10px 40px -10px rgba(152, 207, 84, 0.12);
    }
    
    .shadow-touch {
        box-shadow: 0 20px 50px -12px rgba(37, 35, 30, 0.05);
    }
</style>